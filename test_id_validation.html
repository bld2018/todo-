<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°çº¢ä¹¦IDéªŒè¯æµ‹è¯•</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fafafa;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        .test-button {
            background: #1890ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .test-button:hover {
            background: #40a9ff;
        }
        .result {
            margin: 15px 0;
            padding: 15px;
            border-radius: 4px;
            font-weight: bold;
        }
        .valid {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            color: #52c41a;
        }
        .invalid {
            background: #fff1f0;
            border: 1px solid #ffa39e;
            color: #ff4d4f;
        }
        .test-case {
            margin: 10px 0;
            padding: 10px;
            border-left: 3px solid #1890ff;
            background: white;
        }
        .red-marked {
            border-left-color: #ff4d4f;
        }
        .normal-display {
            border-left-color: #52c41a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å°çº¢ä¹¦IDéªŒè¯æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>å®æ—¶æµ‹è¯•</h2>
            <input type="text" id="testInput" class="test-input" placeholder="è¾“å…¥å°çº¢ä¹¦IDè¿›è¡Œæµ‹è¯•...">
            <button class="test-button" onclick="testSingleId()">æµ‹è¯•</button>
            <div id="singleResult"></div>
        </div>

        <div class="test-section">
            <h2>æ‰¹é‡æµ‹è¯•ç”¨ä¾‹</h2>
            <button class="test-button" onclick="runBatchTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <div id="batchResults"></div>
        </div>

        <div class="test-section">
            <h2>éªŒè¯è§„åˆ™è¯´æ˜</h2>
            <ul>
                <li><strong>TESTæ ‡è®°</strong>: ä»»ä½•å¤§å°å†™çš„"TEST"éƒ½ä¼šæ˜¾ç¤ºçº¢è‰²</li>
                <li><strong>çº¯æ•°å­—</strong>: å¦‚ "123456" - æ­£å¸¸æ˜¾ç¤º</li>
                <li><strong>çº¯å­—æ¯</strong>: å¦‚ "abcdef" - æ­£å¸¸æ˜¾ç¤º</li>
                <li><strong>å­—æ¯+æ•°å­—</strong>: å¦‚ "abc123" - æ­£å¸¸æ˜¾ç¤º</li>
                <li><strong>ç‰¹æ®Šå­—ç¬¦</strong>: æ”¯æŒä¸‹åˆ’çº¿(_)å’Œè¿å­—ç¬¦(-)</li>
                <li><strong>é•¿åº¦è¦æ±‚</strong>: è‡³å°‘3ä¸ªå­—ç¬¦</li>
            </ul>
        </div>
    </div>

    <script>
        function testSingleId() {
            const input = document.getElementById('testInput').value.trim();
            const resultDiv = document.getElementById('singleResult');
            
            if (!input) {
                resultDiv.innerHTML = '<div class="result invalid">è¯·è¾“å…¥è¦æµ‹è¯•çš„ID</div>';
                return;
            }
            
            const isValid = isValidXiaohongshuId(input);
            const style = getXiaohongshuIdStyle(input);
            const isTest = input.toUpperCase() === 'TEST';
            
            let resultClass = isValid ? 'valid' : 'invalid';
            let resultText = isValid ? 'âœ… æœ‰æ•ˆID' : 'âŒ æ— æ•ˆID';
            let styleInfo = style ? 'ğŸ”´ çº¢è‰²æ ‡è®°' : 'ğŸŸ¢ æ­£å¸¸æ˜¾ç¤º';
            
            resultDiv.innerHTML = `
                <div class="result ${resultClass}">
                    <strong>è¾“å…¥:</strong> ${input}<br>
                    <strong>éªŒè¯ç»“æœ:</strong> ${resultText}<br>
                    <strong>æ ·å¼æ ‡è®°:</strong> ${styleInfo}<br>
                    <strong>æ˜¾ç¤ºæ•ˆæœ:</strong> <span style="${style}">${input}</span>
                </div>
            `;
        }

        function runBatchTests() {
            const testCases = [
                'TEST',           // åº”è¯¥çº¢è‰²æ ‡è®°
                'test',           // åº”è¯¥çº¢è‰²æ ‡è®°
                'Test',           // åº”è¯¥çº¢è‰²æ ‡è®°
                '123456',         // çº¯æ•°å­— - æ­£å¸¸æ˜¾ç¤º
                'abcdef',         // çº¯å­—æ¯ - æ­£å¸¸æ˜¾ç¤º
                'abc123',         // å­—æ¯+æ•°å­— - æ­£å¸¸æ˜¾ç¤º
                'user_123',       // ä¸‹åˆ’çº¿ - æ­£å¸¸æ˜¾ç¤º
                'user-name',      // è¿å­—ç¬¦ - æ­£å¸¸æ˜¾ç¤º
                'AB12CD34',       // å¤§å°å†™æ··åˆ - æ­£å¸¸æ˜¾ç¤º
                '12',             // å¤ªçŸ­ - æ— æ•ˆ
                '',               // ç©ºå­—ç¬¦ä¸² - æ— æ•ˆ
                'user@name',      // ç‰¹æ®Šå­—ç¬¦ - æ— æ•ˆ
                'æµ‹è¯•ä¸­æ–‡',        // ä¸­æ–‡ - æ— æ•ˆ
                'user name'       // ç©ºæ ¼ - æ— æ•ˆ
            ];
            
            const resultsDiv = document.getElementById('batchResults');
            resultsDiv.innerHTML = '<h3>æµ‹è¯•ç»“æœ:</h3>';
            
            testCases.forEach(testCase => {
                const isValid = isValidXiaohongshuId(testCase);
                const style = getXiaohongshuIdStyle(testCase);
                const isTest = testCase && testCase.toUpperCase() === 'TEST';
                
                let testCaseClass = isTest ? 'red-marked' : 'normal-display';
                let statusText = isTest ? 'ğŸ”´ TESTæ ‡è®°(çº¢è‰²)' : 
                                  (isValid ? 'ğŸŸ¢ æœ‰æ•ˆID(æ­£å¸¸)' : 'âŒ æ— æ•ˆID');
                
                resultsDiv.innerHTML += `
                    <div class="test-case ${testCaseClass}">
                        <strong>è¾“å…¥:</strong> "${testCase}"<br>
                        <strong>éªŒè¯:</strong> ${isValid ? 'âœ… æœ‰æ•ˆ' : 'âŒ æ— æ•ˆ'}<br>
                        <strong>æ ·å¼:</strong> ${style ? 'ğŸ”´ çº¢è‰²æ ‡è®°' : 'ğŸŸ¢ æ­£å¸¸æ˜¾ç¤º'}<br>
                        <strong>æ˜¾ç¤ºæ•ˆæœ:</strong> <span style="${style}">${testCase || '(ç©º)'}</span><br>
                        <strong>ç»“æœ:</strong> ${statusText}
                    </div>
                `;
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæ‰¹é‡æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            runBatchTests();
        });
    </script>
</body>
</html>