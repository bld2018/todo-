<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†åå°ç™»å½•æµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #f6ffed; border: 1px solid #52c41a; }
        .error { background: #fff2f0; border: 1px solid #ff4d4f; }
        .info { background: #e6f7ff; border: 1px solid #1890ff; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ ç®¡ç†åå°ç™»å½•åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>ç‚¹å‡»ä¸‹æ–¹çš„"âš™ï¸ ç®¡ç†åå°"æŒ‰é’®</li>
                <li>è§‚å¯Ÿæ˜¯å¦å¼¹å‡ºç™»å½•æ¨¡æ€æ¡†</li>
                <li>è¾“å…¥ç®¡ç†å‘˜è´¦å·å¯†ç è¿›è¡Œæµ‹è¯•</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>ğŸ® æµ‹è¯•æŒ‰é’®</h3>
            <button class="btn btn-primary" id="adminLoginBtn">
                âš™ï¸ ç®¡ç†åå°
            </button>
            <button class="btn btn-secondary" onclick="checkElements()">
                ğŸ§ª æ£€æŸ¥å…ƒç´ çŠ¶æ€
            </button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
            <div id="testResults"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ’¡ ç®¡ç†å‘˜ç™»å½•ä¿¡æ¯</h3>
            <div class="status info">
                <strong>ç”¨æˆ·å:</strong> admin<br>
                <strong>å¯†ç :</strong> luo2026.<br>
                <small>(æ¥è‡ª config.js é…ç½®)</small>
            </div>
        </div>
    </div>

    <!-- ç®¡ç†åå°ç™»å½•æ¨¡æ€æ¡† -->
    <div id="adminLoginModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ” ç®¡ç†å‘˜ç™»å½•</h3>
                <span class="close" onclick="closeAdminLoginModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ç®¡ç†å‘˜ç”¨æˆ·å</label>
                    <input type="text" id="adminUsername" class="form-control" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜ç”¨æˆ·å">
                </div>
                <div class="form-group">
                    <label>ç®¡ç†å‘˜å¯†ç </label>
                    <input type="password" id="adminPassword" class="form-control" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
                </div>
                <div id="adminLoginError" class="error-message" style="display: none;"></div>
                <button class="btn btn-primary btn-block" onclick="performAdminLogin()">ç™»å½•</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        // æµ‹è¯•ä¸“ç”¨çš„ç®€åŒ–ç‰ˆæœ¬å‡½æ•°
        let testResults = [];
        
        function logResult(message, type = 'info') {
            const resultDiv = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const statusClass = type === 'success' ? 'success' : type === 'error' ? 'error' : 'info';
            resultDiv.innerHTML += `<div class="status ${statusClass}">[${timestamp}] ${message}</div>`;
            resultDiv.scrollTop = resultDiv.scrollHeight;
        }
        
        function checkElements() {
            logResult('å¼€å§‹æ£€æŸ¥é¡µé¢å…ƒç´ ...', 'info');
            
            const adminBtn = document.getElementById('adminLoginBtn');
            if (adminBtn) {
                logResult('âœ… æ‰¾åˆ°ç®¡ç†åå°æŒ‰é’®', 'success');
                logResult(`æŒ‰é’®æ–‡æœ¬: ${adminBtn.textContent.trim()}`, 'info');
                logResult(`æŒ‰é’®ID: ${adminBtn.id}`, 'info');
            } else {
                logResult('âŒ æœªæ‰¾åˆ°ç®¡ç†åå°æŒ‰é’®', 'error');
            }
            
            const modal = document.getElementById('adminLoginModal');
            if (modal) {
                logResult('âœ… æ‰¾åˆ°ç™»å½•æ¨¡æ€æ¡†', 'success');
                logResult(`æ¨¡æ€æ¡†åˆå§‹çŠ¶æ€: ${modal.style.display}`, 'info');
            } else {
                logResult('âŒ æœªæ‰¾åˆ°ç™»å½•æ¨¡æ€æ¡†', 'error');
            }
        }
        
        function showAdminLogin() {
            logResult('ğŸ”§ showAdminLoginå‡½æ•°è¢«è°ƒç”¨', 'info');
            const modal = document.getElementById('adminLoginModal');
            if (modal) {
                modal.style.display = 'flex';
                logResult('âœ… ç™»å½•æ¨¡æ€æ¡†å·²æ˜¾ç¤º', 'success');
            } else {
                logResult('âŒ æ— æ³•æ˜¾ç¤ºç™»å½•æ¨¡æ€æ¡†', 'error');
            }
        }
        
        function closeAdminLoginModal() {
            const modal = document.getElementById('adminLoginModal');
            if (modal) {
                modal.style.display = 'none';
                logResult('âœ… ç™»å½•æ¨¡æ€æ¡†å·²å…³é—­', 'info');
            }
        }
        
        async function performAdminLogin() {
            const username = document.getElementById('adminUsername')?.value.trim();
            const password = document.getElementById('adminPassword')?.value.trim();
            const errorEl = document.getElementById('adminLoginError');
            
            logResult(`å°è¯•ç™»å½• - ç”¨æˆ·å: ${username || 'æœªè¾“å…¥'}, å¯†ç : ${password ? '***' : 'æœªè¾“å…¥'}`, 'info');
            
            if (!username || !password) {
                if (errorEl) {
                    errorEl.textContent = 'è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ';
                    errorEl.style.display = 'block';
                }
                logResult('âŒ è¾“å…¥ä¸å®Œæ•´', 'error');
                return;
            }
            
            // ä½¿ç”¨config.jsä¸­çš„å‡­è¯éªŒè¯
            if (username === DEFAULT_ADMIN.username && password === DEFAULT_ADMIN.password) {
                logResult('ğŸ‰ ç®¡ç†å‘˜ç™»å½•æˆåŠŸï¼', 'success');
                if (errorEl) errorEl.style.display = 'none';
                setTimeout(() => {
                    alert('ç™»å½•æˆåŠŸï¼ä½†è¿™åªæ˜¯æµ‹è¯•é¡µé¢ã€‚');
                    closeAdminLoginModal();
                }, 1000);
            } else {
                if (errorEl) {
                    errorEl.textContent = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
                    errorEl.style.display = 'block';
                }
                logResult('âŒ ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯', 'error');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥
        document.addEventListener('DOMContentLoaded', () => {
            logResult('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...', 'info');
            
            // ç»‘å®šç®¡ç†åå°æŒ‰é’®äº‹ä»¶
            const adminBtn = document.getElementById('adminLoginBtn');
            if (adminBtn) {
                adminBtn.addEventListener('click', showAdminLogin);
                logResult('âœ… ç®¡ç†åå°æŒ‰é’®äº‹ä»¶ç»‘å®šå®Œæˆ', 'success');
            }
            
            // è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥
            setTimeout(checkElements, 1000);
        });
    </script>
</body>
</html>