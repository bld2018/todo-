<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠéº»åˆ†å…¨ç»„åˆåŒ¹é…ç³»ç»Ÿ - å®¡è®¡åˆ é™¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            text-align: center;
            padding: 35px 20px;
            position: relative;
        }
        
        h1 {
            font-size: 2.4rem;
            margin-bottom: 12px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            margin-top: 8px;
        }
        
        .alipay-logo {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #1677ff, #00a1e9);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(22, 119, 255, 0.3);
        }
        
        .content {
            padding: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .left-panel, .right-panel {
            flex: 1;
            min-width: 300px;
        }
        
        .panel {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            position: relative;
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a365d;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .panel-title::before {
            content: "ğŸ“‹";
            font-size: 1.4em;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-size: 0.95rem;
            margin-bottom: 8px;
            font-weight: 600;
            color: #595959;
        }
        
        .name-input, .score-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d9d9d9;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .name-input:focus, .score-input:focus {
            border-color: #1677ff;
            outline: none;
        }
        
        .btn-add {
            background: linear-gradient(120deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn-add:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 117, 252, 0.4);
        }
        
        .participants-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            margin-top: 15px;
            position: relative;
        }
        
        .participant-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafafa;
            transition: background 0.2s;
        }
        
        .participant-item:hover {
            background: #f0f7ff;
        }
        
        .participant-id {
            background: #1677ff;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 10px;
        }
        
        .participant-name {
            font-weight: 600;
            color: #1a365d;
        }
        
        .participant-score {
            background: linear-gradient(120deg, #ff8a00 0%, #da1b60 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        /* åˆ é™¤æŒ‰é’®æ ·å¼ */
        .btn-remove {
            background: #ff4d4f;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .btn-remove:hover {
            background: #cf1322;
            transform: scale(1.05);
        }
        
        .btn-remove::before {
            content: "ğŸ—‘ï¸";
        }
        
        .btn-match {
            background: linear-gradient(120deg, #722ed1 0%, #9254de 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 6px 20px rgba(114, 46, 209, 0.4);
        }
        
        .btn-match:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(114, 46, 209, 0.6);
        }
        
        .btn-export {
            background: linear-gradient(120deg, #13c2c2 0%, #40a9ff 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(19, 194, 194, 0.4);
        }
        
        .btn-audit {
            background: linear-gradient(120deg, #fa8c16 0%, #ffa940 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
            font-weight: 600;
        }
        
        .btn-audit:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(250, 140, 22, 0.4);
        }
        
        .result-container {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .result-container.show {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .success-container {
            background: linear-gradient(135deg, #f6ffed 0%, #e6f7ff 100%);
            border: 3px solid #52c41a;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 25px;
        }
        
        .success-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #b7eb8f;
        }
        
        .success-title {
            font-size: 2.2rem;
            color: #52c41a;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .success-count {
            font-size: 2.8rem;
            font-weight: bold;
            color: #1677ff;
            margin: 15px 0;
        }
        
        .combo-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #1677ff;
            position: relative;
            overflow: hidden;
        }
        
        .combo-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(0deg, #1677ff, #722ed1);
        }
        
        .combo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .combo-index {
            background: linear-gradient(120deg, #722ed1 0%, #9254de 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .combo-total {
            font-size: 1.8rem;
            font-weight: bold;
            color: #52c41a;
        }
        
        .combo-members {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .member-item {
            background: #f9fbfd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e6f7ff;
        }
        
        .member-id {
            display: inline-block;
            background: #1677ff;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .member-name {
            font-weight: 600;
            color: #595959;
            margin-bottom: 5px;
            font-size: 0.95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .member-score {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1677ff;
        }
        
        .no-match {
            background: linear-gradient(135deg, #fff2e8 0%, #fff7e6 100%);
            border: 3px solid #fa8c16;
            border-radius: 16px;
            padding: 35px;
            margin-bottom: 25px;
            position: relative;
        }
        
        .no-match-header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .no-match-title {
            font-size: 2rem;
            color: #fa8c16;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .current-total {
            font-size: 2.8rem;
            font-weight: bold;
            color: #ff4d4f;
            margin: 15px 0;
        }
        
        .diff-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .diff-negative {
            color: #ff4d4f;
        }
        
        .diff-positive {
            color: #52c41a;
        }
        
        .target-score {
            font-size: 1.8rem;
            color: #1677ff;
            font-weight: 600;
            margin: 15px 0;
        }
        
        .members-pair {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .member-pair-card {
            background: white;
            padding: 30px 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            border: 2px solid #ffd591;
            min-width: 180px;
        }
        
        .member-pair-id {
            display: inline-block;
            background: #fa8c16;
            color: white;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .member-pair-name {
            font-weight: 700;
            color: #ad6800;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .member-pair-score {
            font-size: 2.2rem;
            font-weight: bold;
            color: #fa8c16;
        }
        
        .no-match-tip {
            background: #fff7e6;
            border-left: 5px solid #faad14;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-top: 30px;
            font-size: 1.05rem;
            line-height: 1.7;
        }
        
        .no-match-tip strong {
            color: #ad6800;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #8c8c8c;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.6;
        }
        
        .empty-state-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 500;
        }
        
        .explanation {
            background: #f0f7ff;
            border-left: 5px solid #1677ff;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 25px 0;
            font-size: 1.05rem;
            line-height: 1.8;
        }
        
        .explanation strong {
            color: #003a8c;
        }
        
        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 1.05rem;
            background: #f9fbfd;
            border-top: 1px solid #eee;
            margin-top: 25px;
        }
        
        .stats-bar {
            background: #f9f0ff;
            padding: 20px;
            border-radius: 14px;
            margin: 25px 0;
            text-align: center;
            font-size: 1.1rem;
            border: 2px solid #d3adf7;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stats-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .stats-label {
            color: #8c8c8c;
            font-size: 0.9rem;
            display: block;
            margin-bottom: 5px;
        }
        
        .stats-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #722ed1;
        }
        
        .combo-highlight {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(114, 46, 209, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(114, 46, 209, 0); }
        }
        
        /* åˆ é™¤åŸå› æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: #ff4d4f;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }
        
        .reason-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .reason-option {
            border: 2px solid #d9d9d9;
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
        }
        
        .reason-option:hover {
            border-color: #1677ff;
            background: #f0f7ff;
        }
        
        .reason-option.selected {
            border-color: #ff4d4f;
            background: #fff2f0;
            font-weight: 600;
            transform: scale(1.03);
        }
        
        .custom-reason {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d9d9d9;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 25px;
            min-height: 80px;
            resize: vertical;
        }
        
        .custom-reason:focus {
            border-color: #1677ff;
            outline: none;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        
        .btn-modal-cancel {
            flex: 1;
            background: #d9d9d9;
            color: #595959;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-modal-cancel:hover {
            background: #bfbfbf;
        }
        
        .btn-modal-confirm {
            flex: 1;
            background: linear-gradient(120deg, #ff4d4f 0%, #cf1322 100%);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(255, 77, 79, 0.3);
        }
        
        .btn-modal-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 77, 79, 0.4);
        }
        
        .btn-modal-confirm:disabled {
            background: #ffccc7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .audit-log {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .audit-item {
            padding: 15px;
            border-bottom: 1px solid #f5f5f5;
            background: #fff9f9;
        }
        
        .audit-item:last-child {
            border-bottom: none;
        }
        
        .audit-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .audit-time {
            color: #8c8c8c;
        }
        
        .audit-id {
            background: #ff4d4f;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .audit-reason {
            background: #fff2e8;
            border-left: 3px solid #fa8c16;
            padding: 10px 15px;
            border-radius: 0 6px 6px 0;
            margin: 8px 0;
            font-size: 0.95rem;
            color: #ad6800;
        }
        
        .audit-name-score {
            color: #595959;
            font-size: 0.95rem;
            margin-top: 5px;
        }
        
        .data-protection-info {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .data-protection-info strong {
            color: #096dd9;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .combo-members, .members-pair {
                grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
                gap: 12px;
            }
            
            .reason-options {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="alipay-logo">èŠéº»ä¿¡ç”¨</div>
            <h1>èŠéº»åˆ†å…¨ç»„åˆåŒ¹é…ç³»ç»Ÿ</h1>
            <p class="subtitle">ç”¨æˆ·å¯åˆ é™¤è‡ªå·±çš„æ•°æ® Â· å¿…é¡»å¤‡æ³¨åˆ é™¤åŸå›  Â· å®¡è®¡æ—¥å¿—æ°¸ä¹…ä¿ç•™</p>
        </header>
        
        <div class="content">
            <div class="left-panel">
                <div class="panel">
                    <h2 class="panel-title">æ·»åŠ å‚ä¸è€…</h2>
                    <div class="input-group">
                        <label for="nameInput">å§“å/æ˜µç§°</label>
                        <input type="text" id="nameInput" class="name-input" placeholder="è¯·è¾“å…¥å§“åæˆ–æ˜µç§°" value="å¼ ä¸‰">
                    </div>
                    <div class="input-group">
                        <label for="scoreInput">èŠéº»åˆ† (350-950)</label>
                        <input type="number" id="scoreInput" class="score-input" min="350" max="950" placeholder="è¯·è¾“å…¥èŠéº»åˆ†" value="829">
                    </div>
                    <button class="btn-add" onclick="addParticipant()">âœš æ·»åŠ å‚ä¸è€…</button>
                    
                    <div class="data-protection-info">
                        <strong>ğŸ›¡ï¸ æ•°æ®ç®¡ç†è§„åˆ™ï¼š</strong><br>
                        â€¢ æ‚¨å¯ä»¥åˆ é™¤è‡ªå·±æ·»åŠ çš„å‚ä¸è€…ï¼Œä½†<strong>å¿…é¡»å¤‡æ³¨åˆ é™¤åŸå› </strong><br>
                        â€¢ æ‰€æœ‰åˆ é™¤æ“ä½œå°†è¢«è®°å½•åˆ°<strong>ä¸å¯åˆ é™¤çš„å®¡è®¡æ—¥å¿—</strong>ä¸­<br>
                        â€¢ å®¡è®¡æ—¥å¿—åŒ…å«ï¼šåˆ é™¤æ—¶é—´ã€å‚ä¸è€…IDã€åˆ é™¤åŸå› ï¼Œç”¨äºæ•°æ®è¿½æº¯
                    </div>
                    
                    <button class="btn-export" onclick="exportData()">ğŸ“¤ å¯¼å‡ºå…¨éƒ¨æ•°æ®</button>
                    <button class="btn-audit" onclick="showAuditLog()">ğŸ“‹ æŸ¥çœ‹åˆ é™¤å®¡è®¡æ—¥å¿—</button>
                </div>
                
                <div class="panel">
                    <h2 class="panel-title">å·²ç™»è®°å‚ä¸è€… (<span id="participantCount">0</span>)</h2>
                    <div class="participants-list" id="participantsList">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ‘¥</div>
                            <div class="empty-state-text">æš‚æ— å‚ä¸è€…</div>
                            <div>è¯·åœ¨ä¸Šæ–¹æ·»åŠ å‚ä¸è€…ä¿¡æ¯</div>
                        </div>
                    </div>
                </div>
                
                <button class="btn-match" onclick="matchAllTeams()">ğŸ¯ ç«‹å³æŸ¥æ‰¾æ‰€æœ‰ç»„åˆ</button>
            </div>
            
            <div class="right-panel">
                <div class="panel">
                    <h2 class="panel-title">åŒ¹é…ç»“æœ</h2>
                    
                    <div class="stats-bar" id="statsBar" style="display: none;">
                        <div><strong>ğŸ“Š å‚ä¸è€…ç»Ÿè®¡</strong></div>
                        <div class="stats-grid">
                            <div class="stats-item">
                                <span class="stats-label">æ€»äººæ•°</span>
                                <span class="stats-value" id="statsCount">0</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">æœ€é«˜åˆ†</span>
                                <span class="stats-value" id="statsMax">0</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">æœ€ä½åˆ†</span>
                                <span class="stats-value" id="statsMin">0</span>
                            </div>
                            <div class="stats-item">
                                <span class="stats-label">ç»„åˆæ•°</span>
                                <span class="stats-value" id="statsCombo">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-container" id="resultContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ¯</div>
                            <div class="empty-state-text">ç‚¹å‡»"ç«‹å³æŸ¥æ‰¾æ‰€æœ‰ç»„åˆ"å¼€å§‹åŒ¹é…</div>
                            <div>ç³»ç»Ÿå°†æŸ¥æ‰¾æ‰€æœ‰æ€»åˆ†æ°å¥½ç­‰äº2026çš„ç»„åˆ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2026 èŠéº»åˆ†å…¨ç»„åˆåŒ¹é…ç³»ç»Ÿ | åˆ é™¤éœ€å¤‡æ³¨åŸå›  Â· å®¡è®¡æ—¥å¿—æ°¸ä¹…ä¿ç•™</p>
            <p>ğŸ”’ å®‰å…¨æœºåˆ¶ï¼šåˆ é™¤æ“ä½œå¯è¿½æº¯ï¼Œå®¡è®¡æ—¥å¿—ä¸å¯åˆ é™¤ï¼Œç¡®ä¿æ•°æ®æ“ä½œé€æ˜</p>
        </div>
    </div>
    
    <!-- åˆ é™¤åŸå› æ¨¡æ€æ¡† -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-title">ğŸ—‘ï¸ è¯·å¤‡æ³¨åˆ é™¤åŸå› </div>
            <div style="text-align: center; margin-bottom: 15px; color: #595959;">
                å‚ä¸è€…: <span id="deleteTargetName" style="font-weight: 600; color: #1a365d;">---</span> 
                (<span id="deleteTargetScore" style="color: #ff4d4f;">---</span>åˆ†)
            </div>
            
            <div class="reason-options">
                <div class="reason-option" onclick="selectReason(this, 'å·²ç»„é˜ŸæˆåŠŸ')">âœ… å·²ç»„é˜ŸæˆåŠŸ</div>
                <div class="reason-option" onclick="selectReason(this, 'è¾“å…¥é”™è¯¯')">âœï¸ è¾“å…¥é”™è¯¯</div>
                <div class="reason-option" onclick="selectReason(this, 'é‡å¤ç™»è®°')">ğŸ”„ é‡å¤ç™»è®°</div>
                <div class="reason-option" onclick="selectReason(this, 'ç”¨æˆ·é€€å‡º')">ğŸšª ç”¨æˆ·é€€å‡º</div>
            </div>
            
            <textarea class="custom-reason" id="customReason" placeholder="æˆ–è¾“å…¥å…¶ä»–åŸå› ï¼ˆå¿…å¡«ï¼Œè‡³å°‘5ä¸ªå­—ï¼‰" oninput="validateReason()"></textarea>
            
            <div class="modal-buttons">
                <button class="btn-modal-cancel" onclick="closeDeleteModal()">å–æ¶ˆ</button>
                <button class="btn-modal-confirm" id="confirmDeleteBtn" onclick="confirmDelete()" disabled>ç¡®è®¤åˆ é™¤</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€æ•°æ®å­˜å‚¨
        const PARTICIPANTS_KEY = 'sesame_participants_v3';
        const AUDIT_LOG_KEY = 'sesame_audit_log_v3';
        const ID_COUNTER_KEY = 'sesame_id_counter_v3';
        
        let participants = [];
        let auditLog = [];
        let nextId = 1;
        let pendingDeleteId = null;
        
        // åˆå§‹åŒ–ï¼šä»localStorageåŠ è½½æ•°æ®
        function initStorage() {
            // åŠ è½½å‚ä¸è€…æ•°æ®
            const savedParticipants = localStorage.getItem(PARTICIPANTS_KEY);
            if (savedParticipants) {
                try {
                    participants = JSON.parse(savedParticipants);
                } catch (e) {
                    participants = [];
                }
            }
            
            // åŠ è½½å®¡è®¡æ—¥å¿—ï¼ˆä¸å¯åˆ é™¤ï¼‰
            const savedAuditLog = localStorage.getItem(AUDIT_LOG_KEY);
            if (savedAuditLog) {
                try {
                    auditLog = JSON.parse(savedAuditLog);
                } catch (e) {
                    auditLog = [];
                }
            }
            
            // åŠ è½½IDè®¡æ•°å™¨
            const savedCounter = localStorage.getItem(ID_COUNTER_KEY);
            if (savedCounter) {
                nextId = parseInt(savedCounter);
                // ç¡®ä¿nextIdå¤§äºç°æœ‰æœ€å¤§ID
                if (participants.length > 0) {
                    const maxId = Math.max(...participants.map(p => parseInt(p.id.substring(1))));
                    nextId = Math.max(nextId, maxId + 1);
                }
            } else {
                // åˆå§‹åŒ–IDè®¡æ•°å™¨ï¼ˆåŸºäºç°æœ‰æ•°æ®ï¼‰
                if (participants.length > 0) {
                    const maxId = Math.max(...participants.map(p => parseInt(p.id.substring(1))));
                    nextId = maxId + 1;
                }
            }
            
            // ä¿å­˜åˆå§‹çŠ¶æ€
            saveData();
            updateParticipantsList();
            updateStats();
        }
        
        // ä¿å­˜æ•°æ®åˆ°localStorage
        function saveData() {
            localStorage.setItem(PARTICIPANTS_KEY, JSON.stringify(participants));
            localStorage.setItem(AUDIT_LOG_KEY, JSON.stringify(auditLog)); // å®¡è®¡æ—¥å¿—æ°¸ä¹…ä¿ç•™
            localStorage.setItem(ID_COUNTER_KEY, nextId.toString());
        }
        
        // ç”Ÿæˆç”¨æˆ·ID
        function generateUserId() {
            return `P${String(nextId++).padStart(3, '0')}`;
        }
        
        // æ·»åŠ å‚ä¸è€…
        function addParticipant() {
            const nameInput = document.getElementById('nameInput');
            const scoreInput = document.getElementById('scoreInput');
            
            const name = nameInput.value.trim();
            const score = parseInt(scoreInput.value);
            
            // éªŒè¯è¾“å…¥
            if (!name) {
                alert('è¯·è¾“å…¥å§“åæˆ–æ˜µç§°');
                return;
            }
            
            if (isNaN(score) || score < 350 || score > 950) {
                alert('èŠéº»åˆ†å¿…é¡»åœ¨350åˆ°950ä¹‹é—´');
                return;
            }
            
            // æ·»åŠ åˆ°åˆ—è¡¨ï¼ˆåˆ†é…å”¯ä¸€IDï¼‰
            const newParticipant = {
                id: generateUserId(),
                name: name,
                score: score,
                timestamp: new Date().toISOString()
            };
            
            participants.push(newParticipant);
            
            // ä¿å­˜æ•°æ®
            saveData();
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            nameInput.value = '';
            scoreInput.value = '';
            
            // æ›´æ–°åˆ—è¡¨
            updateParticipantsList();
            updateStats();
            
            // æç¤º
            alert(`âœ… ${newParticipant.name} (${newParticipant.id}) å·²æ·»åŠ `);
        }
        
        // æ›´æ–°å‚ä¸è€…åˆ—è¡¨
        function updateParticipantsList() {
            const listElement = document.getElementById('participantsList');
            const countElement = document.getElementById('participantCount');
            
            countElement.textContent = participants.length;
            
            if (participants.length === 0) {
                listElement.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ‘¥</div>
                        <div class="empty-state-text">æš‚æ— å‚ä¸è€…</div>
                        <div>è¯·åœ¨ä¸Šæ–¹æ·»åŠ å‚ä¸è€…ä¿¡æ¯</div>
                    </div>
                `;
                return;
            }
            
            // æŒ‰IDæ’åºï¼ˆæ—¶é—´é¡ºåºï¼‰
            const sortedParticipants = [...participants].sort((a, b) => {
                return parseInt(a.id.substring(1)) - parseInt(b.id.substring(1));
            });
            
            // æ˜¾ç¤ºå‚ä¸è€…åˆ—è¡¨ï¼ˆå¸¦åˆ é™¤æŒ‰é’®ï¼‰
            listElement.innerHTML = sortedParticipants.map(p => `
                <div class="participant-item">
                    <div>
                        <span class="participant-id">${p.id}</span>
                        <span class="participant-name">${p.name}</span>
                        <span style="margin-left: 15px; color: #8c8c8c;">èŠéº»åˆ†: </span>
                        <span class="participant-score">${p.score}</span>
                    </div>
                    <button class="btn-remove" onclick="openDeleteModal('${p.id}', '${p.name}', ${p.score})" title="åˆ é™¤å‚ä¸è€…ï¼ˆéœ€å¤‡æ³¨åŸå› ï¼‰">åˆ é™¤</button>
                </div>
            `).join('');
        }
        
        // æ‰“å¼€åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡†
        function openDeleteModal(participantId, name, score) {
            pendingDeleteId = participantId;
            document.getElementById('deleteTargetName').textContent = name;
            document.getElementById('deleteTargetScore').textContent = score;
            document.getElementById('customReason').value = '';
            document.getElementById('confirmDeleteBtn').disabled = true;
            
            // æ¸…é™¤å·²é€‰é¡¹
            document.querySelectorAll('.reason-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            document.getElementById('deleteModal').style.display = 'flex';
        }
        
        // é€‰æ‹©é¢„è®¾åŸå› 
        function selectReason(element, reason) {
            // æ¸…é™¤å…¶ä»–é€‰é¡¹
            document.querySelectorAll('.reason-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            // é€‰ä¸­å½“å‰é¡¹
            element.classList.add('selected');
            
            // å¡«å…¥è‡ªå®šä¹‰åŸå› æ¡†
            document.getElementById('customReason').value = reason;
            validateReason();
        }
        
        // éªŒè¯åŸå› 
        function validateReason() {
            const reason = document.getElementById('customReason').value.trim();
            document.getElementById('confirmDeleteBtn').disabled = reason.length < 5;
        }
        
        // å…³é—­æ¨¡æ€æ¡†
        function closeDeleteModal() {
            document.getElementById('deleteModal').style.display = 'none';
            pendingDeleteId = null;
        }
        
        // ç¡®è®¤åˆ é™¤
        function confirmDelete() {
            if (!pendingDeleteId) return;
            
            const reason = document.getElementById('customReason').value.trim();
            if (reason.length < 5) {
                alert('åˆ é™¤åŸå› è‡³å°‘éœ€è¦5ä¸ªå­—');
                return;
            }
            
            // æŸ¥æ‰¾è¦åˆ é™¤çš„å‚ä¸è€…
            const index = participants.findIndex(p => p.id === pendingDeleteId);
            if (index === -1) {
                alert('æœªæ‰¾åˆ°è¯¥å‚ä¸è€…');
                closeDeleteModal();
                return;
            }
            
            const participant = participants[index];
            
            // è®°å½•å®¡è®¡æ—¥å¿—ï¼ˆä¸å¯åˆ é™¤ï¼‰
            auditLog.push({
                id: participant.id,
                name: participant.name,
                score: participant.score,
                deleteReason: reason,
                deleteTime: new Date().toISOString(),
                deleteTimestamp: Date.now()
            });
            
            // ä»å‚ä¸è€…åˆ—è¡¨ä¸­ç§»é™¤
            participants.splice(index, 1);
            
            // ä¿å­˜æ•°æ®ï¼ˆå®¡è®¡æ—¥å¿—æ°¸ä¹…ä¿ç•™ï¼‰
            saveData();
            
            // å…³é—­æ¨¡æ€æ¡†
            closeDeleteModal();
            
            // æ›´æ–°ç•Œé¢
            updateParticipantsList();
            updateStats();
            
            // æç¤º
            alert(`âœ… ${participant.name} (${participant.id}) å·²åˆ é™¤\nåŸå› : ${reason}\n\nâš ï¸ åˆ é™¤æ“ä½œå·²è®°å½•åˆ°ä¸å¯åˆ é™¤çš„å®¡è®¡æ—¥å¿—`);
        }
        
        // å¯¼å‡ºå…¨éƒ¨æ•°æ®
        function exportData() {
            if (participants.length === 0 && auditLog.length === 0) {
                alert('æš‚æ— æ•°æ®å¯å¯¼å‡º');
                return;
            }
            
            // ç”Ÿæˆå¯¼å‡ºæ•°æ®
            const exportData = {
                exportTime: new Date().toISOString(),
                activeParticipants: participants.length,
                deletedRecords: auditLog.length,
                participants: participants.map(p => ({
                    id: p.id,
                    name: p.name,
                    score: p.score,
                    addedAt: p.timestamp
                })),
                auditLog: auditLog.map(log => ({
                    participantId: log.id,
                    name: log.name,
                    score: log.score,
                    deleteReason: log.deleteReason,
                    deleteTime: log.deleteTime
                })),
                combinations: findAllPerfectCombinations(participants, 2026).map((combo, index) => ({
                    combinationId: `C${String(index + 1).padStart(3, '0')}`,
                    members: combo.members.map(m => m.id),
                    totalScore: combo.totalScore
                }))
            };
            
            // ç”ŸæˆJSONæ–‡ä»¶
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `sesame_score_export_${new Date().toISOString().slice(0,10)}.json`;
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert(`âœ… æ•°æ®å¯¼å‡ºæˆåŠŸ\n- å½“å‰å‚ä¸è€…: ${participants.length} äºº\n- å·²åˆ é™¤è®°å½•: ${auditLog.length} æ¡\n- æœ‰æ•ˆç»„åˆ: ${exportData.combinations.length} ä¸ª`);
        }
        
        // æ˜¾ç¤ºå®¡è®¡æ—¥å¿—
        function showAuditLog() {
            if (auditLog.length === 0) {
                alert('æš‚æ— åˆ é™¤è®°å½•');
                return;
            }
            
            // æ„å»ºå®¡è®¡æ—¥å¿—HTML
            let logHtml = `
                <div style="padding: 20px; max-width: 800px; margin: 20px auto; background: white; border-radius: 16px; box-shadow: 0 5px 20px rgba(0,0,0,0.15);">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <h2 style="font-size: 1.8rem; color: #ff4d4f; margin-bottom: 10px;">ğŸ—‚ï¸ åˆ é™¤å®¡è®¡æ—¥å¿—</h2>
                        <div style="color: #8c8c8c; font-size: 1.1rem;">å…± ${auditLog.length} æ¡ä¸å¯åˆ é™¤çš„è®°å½•</div>
                    </div>
                    
                    <div style="background: #fff2f0; border: 1px solid #ffa39e; border-radius: 10px; padding: 15px; margin-bottom: 25px; font-size: 0.95rem;">
                        <strong>ğŸ”’ å®¡è®¡æ—¥å¿—ä¿æŠ¤è§„åˆ™ï¼š</strong><br>
                        â€¢ æ‰€æœ‰åˆ é™¤æ“ä½œå‡è¢«æ°¸ä¹…è®°å½•ï¼Œä¸å¯åˆ é™¤ã€ä¸å¯ç¯¡æ”¹<br>
                        â€¢ è®°å½•åŒ…å«ï¼šå‚ä¸è€…IDã€å§“åã€åˆ†æ•°ã€åˆ é™¤åŸå› ã€åˆ é™¤æ—¶é—´<br>
                        â€¢ ç”¨äºæ•°æ®è¿½æº¯å’Œæ“ä½œé€æ˜åº¦ä¿éšœ
                    </div>
                    
                    <div class="audit-log">
            `;
            
            // æŒ‰æ—¶é—´å€’åºæ˜¾ç¤ºï¼ˆæœ€æ–°åœ¨å‰ï¼‰
            const sortedLog = [...auditLog].sort((a, b) => b.deleteTimestamp - a.deleteTimestamp);
            
            sortedLog.forEach((log, index) => {
                const deleteTime = new Date(log.deleteTime).toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                
                logHtml += `
                    <div class="audit-item">
                        <div class="audit-header">
                            <div>
                                <span class="audit-id">${log.id}</span>
                                <span style="margin-left: 10px; font-weight: 600; color: #1a365d;">${log.name}</span>
                            </div>
                            <div class="audit-time">${deleteTime}</div>
                        </div>
                        <div class="audit-name-score">èŠéº»åˆ†: ${log.score} åˆ†</div>
                        <div class="audit-reason">ğŸ“ ${log.deleteReason}</div>
                    </div>
                `;
            });
            
            logHtml += `
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button onclick="document.body.removeChild(this.parentElement.parentElement)" 
                                style="background: #ff4d4f; color: white; border: none; padding: 12px 30px; 
                                       border-radius: 8px; font-size: 1.05rem; font-weight: 600; cursor: pointer;">
                            å…³é—­æ—¥å¿—
                        </button>
                    </div>
                </div>
            `;
            
            // åˆ›å»ºæ¨¡æ€è¦†ç›–å±‚
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.7)';
            overlay.style.zIndex = '2000';
            overlay.style.display = 'flex';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            overlay.onclick = function(e) {
                if (e.target === overlay) {
                    document.body.removeChild(overlay);
                }
            };
            
            overlay.innerHTML = logHtml;
            document.body.appendChild(overlay);
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const statsBar = document.getElementById('statsBar');
            
            if (participants.length === 0) {
                statsBar.style.display = 'none';
                return;
            }
            
            statsBar.style.display = 'block';
            document.getElementById('statsCount').textContent = participants.length;
            
            const scores = participants.map(p => p.score);
            const maxScore = Math.max(...scores);
            const minScore = Math.min(...scores);
            
            document.getElementById('statsMax').textContent = maxScore;
            document.getElementById('statsMin').textContent = minScore;
        }
        
        // å…¨ç»„åˆåŒ¹é…ï¼šæ‰¾å‡ºæ‰€æœ‰æ°å¥½ç­‰äº2026çš„ç»„åˆ
        function matchAllTeams() {
            if (participants.length === 0) {
                alert('è¯·å…ˆæ·»åŠ å‚ä¸è€…ï¼');
                return;
            }
            
            if (participants.length === 1) {
                alert('è‡³å°‘éœ€è¦2ä¸ªå‚ä¸è€…æ‰èƒ½åŒ¹é…ï¼');
                return;
            }
            
            const TARGET = 2026;
            
            // æŸ¥æ‰¾æ‰€æœ‰æ°å¥½ç­‰äº2026çš„ç»„åˆ
            const allCombos = findAllPerfectCombinations(participants, TARGET);
            
            if (allCombos.length > 0) {
                // æ‰¾åˆ°äº†ä¸€ä¸ªæˆ–å¤šä¸ªç»„åˆ
                showSuccessResult(allCombos);
            } else {
                // æ‰¾ä¸åˆ°ï¼Œéšæœºé€‰2äºº
                const randomPair = getRandomPair(participants);
                showNoMatchResult(randomPair, TARGET);
            }
        }
        
        // æŸ¥æ‰¾æ‰€æœ‰æ°å¥½ç­‰äºç›®æ ‡åˆ†æ•°çš„ç»„åˆï¼ˆ2-6äººç»„åˆï¼‰
        function findAllPerfectCombinations(participants, target) {
            const n = participants.length;
            const allCombos = [];
            
            // å°è¯•ä»2äººç»„åˆå¼€å§‹ï¼Œé€æ­¥å¢åŠ äººæ•°ï¼ˆæœ€å¤š6äººï¼‰
            for (let size = 2; size <= Math.min(6, n); size++) {
                const combos = getCombinations(participants, size);
                
                // æŸ¥æ‰¾æ‰€æœ‰æ€»åˆ†æ°å¥½ç­‰äºç›®æ ‡çš„ç»„åˆ
                for (let combo of combos) {
                    const total = combo.reduce((sum, p) => sum + p.score, 0);
                    if (total === target) {
                        allCombos.push({
                            members: combo,
                            totalScore: total
                        });
                    }
                }
            }
            
            return allCombos; // è¿”å›æ‰€æœ‰æ‰¾åˆ°çš„ç»„åˆ
        }
        
        // è·å–æ‰€æœ‰æŒ‡å®šå¤§å°çš„ç»„åˆ
        function getCombinations(arr, size) {
            const result = [];
            
            function helper(start, combo) {
                if (combo.length === size) {
                    result.push([...combo]);
                    return;
                }
                
                for (let i = start; i < arr.length; i++) {
                    combo.push(arr[i]);
                    helper(i + 1, combo);
                    combo.pop();
                }
            }
            
            helper(0, []);
            return result;
        }
        
        // éšæœºé€‰æ‹©2ä¸ªäºº
        function getRandomPair(participants) {
            if (participants.length <= 2) {
                return participants;
            }
            
            // çœŸæ­£éšæœºé€‰æ‹©2äºº
            const indices = [];
            while (indices.length < 2) {
                const idx = Math.floor(Math.random() * participants.length);
                if (!indices.includes(idx)) {
                    indices.push(idx);
                }
            }
            
            return [participants[indices[0]], participants[indices[1]]];
        }
        
        // æ˜¾ç¤ºæˆåŠŸç»“æœï¼ˆæ‰€æœ‰æ°å¥½ç­‰äº2026çš„ç»„åˆï¼‰
        function showSuccessResult(combos) {
            const container = document.getElementById('resultContainer');
            const statsCombo = document.getElementById('statsCombo');
            
            statsCombo.textContent = combos.length;
            
            let combosHtml = '';
            
            combos.forEach((combo, index) => {
                const membersHtml = combo.members.map(member => `
                    <div class="member-item">
                        <div class="member-id">${member.id}</div>
                        <div class="member-name">${member.name}</div>
                        <div class="member-score">${member.score}</div>
                    </div>
                `).join('');
                
                combosHtml += `
                    <div class="combo-card ${index === 0 ? 'combo-highlight' : ''}">
                        <div class="combo-header">
                            <div class="combo-index">ç»„åˆ #${index + 1}</div>
                            <div class="combo-total">2026 åˆ†</div>
                        </div>
                        <div class="combo-members">
                            ${membersHtml}
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed #e8e8e8; text-align: center; color: #8c8c8c; font-size: 0.95rem;">
                            <strong>æˆå‘˜ID:</strong> ${combo.members.map(m => m.id).join(', ')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = `
                <div class="success-container">
                    <div class="success-header">
                        <div class="success-title">ğŸ‰ æ‰¾åˆ° ${combos.length} ä¸ªå®Œç¾ç»„åˆï¼</div>
                        <div>ä»¥ä¸‹ç»„åˆæ€»åˆ†æ°å¥½ç­‰äº2026åˆ†</div>
                        <div class="success-count">${combos.length}</div>
                        <div style="font-size: 1.1rem; color: #595959;">å…±æ‰¾åˆ° ${combos.length} ä¸ªç¬¦åˆæ¡ä»¶çš„ç»„åˆ</div>
                    </div>
                    ${combosHtml}
                </div>
            `;
            
            container.classList.add('show');
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // æ˜¾ç¤ºæœªåŒ¹é…ç»“æœï¼ˆéšæœº2äºº + å·®å¼‚ï¼‰
        function showNoMatchResult(pair, target) {
            const total = pair.reduce((sum, p) => sum + p.score, 0);
            const diff = total - target;
            const absDiff = Math.abs(diff);
            const container = document.getElementById('resultContainer');
            const statsCombo = document.getElementById('statsCombo');
            
            statsCombo.textContent = 0;
            
            const diffClass = diff < 0 ? 'diff-negative' : 'diff-positive';
            const diffText = diff < 0 ? `-${absDiff}` : `+${absDiff}`;
            const diffMessage = diff < 0 ? `è¿˜å·® ${absDiff} åˆ†` : `è¶…å‡º ${absDiff} åˆ†`;
            const diffColor = diff < 0 ? '#ff4d4f' : '#52c41a';
            
            const membersHtml = pair.map(member => `
                <div class="member-pair-card">
                    <div class="member-pair-id">${member.id}</div>
                    <div class="member-pair-name">${member.name}</div>
                    <div class="member-pair-score">${member.score}</div>
                </div>
            `).join('');
            
            container.innerHTML = `
                <div class="no-match">
                    <div class="no-match-header">
                        <div class="no-match-title">âš ï¸ æœªæ‰¾åˆ°ç²¾å‡†åŒ¹é…</div>
                        <div>æœªæ‰¾åˆ°æ€»åˆ†æ°å¥½ç­‰äº2026çš„ç»„åˆ</div>
                        <div class="current-total">${total} åˆ†</div>
                        <div class="target-score">ğŸ¯ ç›®æ ‡ï¼š2026 åˆ†</div>
                        <div class="diff-display ${diffClass}">${diffText}</div>
                        <div style="font-size: 1.3rem; color: ${diffColor}; font-weight: 600; margin-top: 10px;">
                            ${diffMessage}
                        </div>
                    </div>
                    <div class="members-pair">
                        ${membersHtml}
                    </div>
                    <div class="no-match-tip">
                        <strong>ğŸ’¡ ç»„åˆæç¤ºï¼š</strong><br>
                        â€¢ å½“å‰å…± ${participants.length} äººï¼Œå°è¯•äº†æ‰€æœ‰2-6äººç»„åˆï¼Œæœªæ‰¾åˆ°æ°å¥½ç­‰äº2026çš„ç»„åˆ<br>
                        â€¢ å¯ç»§ç»­æ·»åŠ æ–°æˆå‘˜åˆ›å»ºæ–°ç»„åˆï¼Œæˆ–åˆ é™¤æ— æ•ˆæ•°æ®åé‡æ–°åŒ¹é…
                    </div>
                </div>
            `;
            
            container.classList.add('show');
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // åˆå§‹åŒ–ç³»ç»Ÿ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å­˜å‚¨
            initStorage();
            
            // å›è½¦é”®æ·»åŠ å‚ä¸è€…
            document.getElementById('nameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('scoreInput').focus();
                }
            });
            
            document.getElementById('scoreInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addParticipant();
                }
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('deleteModal');
                if (e.target === modal) {
                    closeDeleteModal();
                }
            });
            
            // ESCé”®å…³é—­æ¨¡æ€æ¡†
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeDeleteModal();
                }
            });
        });
    </script>
</body>
</html>
